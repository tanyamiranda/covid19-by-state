(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{11:function(e,t,a){e.exports=a(23)},16:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n,l=a(0),i=a.n(l),s=a(3),r=a.n(s),c=(a(16),a(1)),o=a.n(c),d=a(4),u=a(5),h=a(6),m=a(8),f=a(10),p=a(7),v=a.n(p),g=(a(20),["positive","negative","totalTestResults","pending","hospitalizedCurrently","inIcuCurrently","onVentilatorCurrently","death","hospitalizedCumulative","inIcuCumulative","onVentilatorCumulative","recovered","hospitalized","deathIncrease","hospitalizedIncrease","negativeIncrease","positiveIncrease","totalTestResultsIncrease"]),E=["#138E05","#A15B81","#2E16A6","#146AD4","#A9D422","#18F8BB","#AFC044","#3B9793","#822611","#FB2E76","#A5CA71","#983538","#082BD9","#2E136A","#05BB78","#44A4AD","#28FD7E","#387862"],y={type:"line",responsive:!0,title:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Day"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}},b=["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"],D=a(9),N=(a(21),function(e){var t=e.fieldName,a=e.optionList,n=e.labelsList,s=e.defaultSelected,r=e.onChangeEvent,c=Object(l.useState)(1),o=Object(D.a)(c,2),d=o[0],u=o[1],h=function(){u(0)};return i.a.createElement("select",{className:"short-drop-down",name:t,onChange:r,defaultValue:s,size:d,onMouseDown:function(){a.length<10?u(a.length):u(10)},onBlur:h},a.map((function(e,t){return i.a.createElement("option",{className:"short-drop-down-option",onClick:h,key:e,value:e},n?n[e]:e)})))}),k=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a),(e=t.call(this)).chartRef=i.a.createRef();var n=[];return n.hospitalizedCurrently=!0,n.inIcuCurrently=!0,n.onVentilatorCurrently=!0,n.death=!0,e.state={selectedState:"NJ",selectedDateRange:"30",selectedFields:n,statesHistoryData:null,dataRefreshedTimestamp:""},e}return Object(h.a)(a,[{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),l+a+n}},{key:"loadChart",value:function(){var e=this.state,t=e.statesHistoryData,a=e.selectedState,l=e.selectedFields,i=e.selectedDateRange,s=new Date;s.setDate(s.getDate()-Number(i));var r,c,o=this.formatDate(s),d=Object.keys(l).filter((function(e){return l[e]})),u=(r=a,c=o,t.filter((function(e){return e.state===r&&e.date>=c})).sort((function(e,t){return e.date-t.date}))),h=function(e,t){var a=[];return t.forEach((function(e,t){a.push({label:e,fill:!1,backgroundColor:E[t],borderColor:E[t],data:[]})})),e.forEach((function(e){t.forEach((function(t){a.find((function(e){return e.label===t})).data.push(e[t]?e[t]:0)}))})),a}(u,d),m=function(e){var t=e.map((function(e){return e.date})).filter((function(e,t,a){return a.indexOf(e)===t})),a=[];return t.forEach((function(e){var t=String(e),n=Number(t.substring(4,6)),l=Number(t.substring(6,8));a.push(n+"/"+l)})),a}(u);"undefined"!==typeof n&&n.destroy();var f=this.chartRef.current.getContext("2d");n=new v.a(f,{type:"line",data:{labels:m,datasets:h},options:y})}},{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching Data from https://covidtracking.com/api/v1/states/daily.json."),t=new Date,a=t.toLocaleString(),e.prev=3,e.next=6,fetch("https://covidtracking.com/api/v1/states/daily.json");case 6:if(!(n=e.sent).ok){e.next=15;break}return e.next=10,n.json();case 10:l=e.sent,this.setState({statesHistoryData:l}),this.setState({dataRefreshedTimestamp:a}),e.next=16;break;case 15:throw Error(n.statusText);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0);case 21:this.loadChart();case 22:case"end":return e.stop()}}),e,this,[[3,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleStateSelection",value:function(e){this.setState({selectedState:e.target.value})}},{key:"handleDateRangeSelection",value:function(e){this.setState({selectedDateRange:e.target.value})}},{key:"handleFieldSelection",value:function(e){var t=this.state.selectedFields,a=e.target.value,n=e.target.checked;t[a]=n,this.setState({selectedFields:t})}},{key:"componentDidUpdate",value:function(){this.loadChart()}},{key:"render",value:function(){var e=this,t=[];return t[15]="Last 15 days",t[30]="Last 30 days",t[45]="Last 45 days",t[60]="Last 60 days",i.a.createElement("div",{className:"state-data-history"},i.a.createElement("div",{className:"page-header"},i.a.createElement("div",{className:"page-title"},i.a.createElement("h2",null,"Covid19 Data Charts for U.S. States"))),i.a.createElement("div",{className:"page-layout"},i.a.createElement("div",{className:"chart-configuration"},i.a.createElement("form",null,i.a.createElement("div",{className:"config-field"},"Data Loaded:"),i.a.createElement("div",null,this.state.dataRefreshedTimestamp),i.a.createElement("br",null),i.a.createElement("div",{className:"config-field"},"State:"),i.a.createElement(N,{fieldName:"states-list",optionList:b,defaultSelected:this.state.selectedState,onChangeEvent:this.handleStateSelection.bind(this)}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"config-field"},"Date Range:"),i.a.createElement(N,{fieldName:"date-range-list",optionList:Object.keys(t),labelsList:t,defaultSelected:this.state.selectedDateRange,onChangeEvent:this.handleDateRangeSelection.bind(this)}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"config-field"},"Data Fields:"),g.map((function(t){return i.a.createElement("div",{className:"field-option",key:t},i.a.createElement("input",{type:"checkbox",name:"field-selection",onChange:function(t){return e.handleFieldSelection(t)},value:t,checked:!!e.state.selectedFields[t]}),i.a.createElement("label",null,t))})))),i.a.createElement("div",{className:"chart-container"},i.a.createElement("div",{className:"chart-title"},"Data for ",this.state.selectedState," last ",this.state.selectedDateRange," days"),i.a.createElement("canvas",{id:"myChart",ref:this.chartRef}),i.a.createElement("p",null,i.a.createElement("b",null,"** Not All States Report All Data")))),i.a.createElement("div",{className:"page-footer"},i.a.createElement("p",null,"This is a visual representation of the data collected by The COVID Tracking Project"),i.a.createElement("p",null,"For more info, visit ",i.a.createElement("span",{className:"site-link",onClick:function(){return window.open("https://covidtracking.com/")}},"https://covidtracking.com/")),i.a.createElement("p",null,"For field definitions, visit ",i.a.createElement("span",{className:"site-link",onClick:function(){return window.open("https://covidtracking.com/api")}},"https://covidtracking.com/api"))))}}]),a}(i.a.Component);a(22);var C=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.a544d112.chunk.js.map